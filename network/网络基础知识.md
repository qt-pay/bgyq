## 网络基础知识

### 网络概述

* 硬件方面：通过介质（电线、光纤和电磁波等）将网络设备和终端连接起来
* 软件方面：操作系统，应用软件，应用程序互相通讯
* 实现资源共享、信息传递

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/net-arc.png)

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/net-concept.jpg)

### 网络演进

* network: 网络，一组相互连接、通讯的设备
* internet: 互联网，多个互联互通的网络
* Internet: 因特网，互联全世界的网络

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/net-evolution.jpg)

### ISP

Internet Service Providers，因特网服务提供商，向用户提供互联网接入业务、信息服务和增值业务的运营商，如：电信、移动和联调。

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/net-isp.jpg)

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/net-isp-service.jpg)

#### ADSL

以前的拨号上网，以前家庭没有路由器和交换机，猫直接直接接到电脑上，利用操作系统拨号上网功能完成网络拨入。

PPPoE，每次拨号入网运营商分配的公网地址都不同。

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/adsl-ppoe.jpg)

### 网络类型

* PAN：Person Area Network，个域网

* LAN：Local Area network，局域网

* CAN：Campus Area Network，园区网

  典型园区网就是高校和办公园区，也可以称为大型局域网

  ![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/CAN-net.jpg)

* MAN：Metropolitan Area Network，城域网

  某城市/街道

* WAN：Wide Area Network，广域网

  跨地域网，北京到上海

* WLAN：Wireless Local Area Network，无线局域网

  主要是AC和AP的配置，典型就是无线wifi

* WWAN：Wireless Wide Area Network，无线广域网

  典型：手机4G和5G网络

### 网络带宽

bandwidth，单位是bps（bit per second），比特每秒。

硬盘存储是Byte为单位，所以100Mb带宽，理论上在电脑上下载速度最快是`100/8=12.5`MB/s.

### 网络拓扑

Topology，用来描绘网络结构（网络类型、设备类型、设备数量、线缆、带宽、服务、数据走向等）的示意图。

### 网络分层设计

分层思想：将复杂的流程分解为几个功能相对单一的子过程

* 流程更加清晰，复杂问题简单化
* 更容易发现问题并针对性的解决问题

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/net-layer-tcpip.jpg)

抓包通常是看到4层，因为物理层是光电信号，看不到。

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/网络分层.jpg)

Frame是整个数据链路层的数据帧

### 单/组/广播

根据目标地址判断，是单播、组播或多播

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/接口流量类型.jpg)

#### Unicast

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/unicost.jpg)

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/unicost-2.jpg)

#### Broadcast

只要广播有域的概念，即广播域

典型使用广播协议：ARP

广播，发送给所属广播域内的所有目标。

MAC地址=`FFFFFFFFFFFF`

IP地址=该网段的广播地址

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/broadcost-1.jpg)

广播，一对其所在广播域所有。

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/broadcast-2.jpg)

#### Multicast

典型使用组播协议：OSPF

组播，相当于给特定label的设备发信息。

组播，目标IP地址是D类预留组播地址，MAC地址=`01-00-5E`开头

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/multicast-1.jpg)

组播和单播一样，可以跨路由器，按照路由表传输。

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/multicast-2.jpg)

#### 流量接收规则

单播：只有目标MAC相同的机器才会接收单播数据

广播：广播域内所有设备都会收到广播数据，然后根据自身判断是否响应广播包。eg，只有IP相同的设备才会响应广播arp包

组播：

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/流量接收规则.png)

### 广播和冲突

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/广播and冲突.jpg)

#### switch Crossbar 

交换机不会出现链路冲突，不存在冲突域

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/hub-and-switch.jpg)

Crossbar 纵横模型，这是一个开关矩阵，每一个 Crosspoint（交点）都是一个开关，交换机通过控制开关来完成输入到特定输出的转发。一个 Crossbar 模型如下所示。

N个输入和N个输出，相互通信，则每条线都需要有交点即N*N。

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/switch-fabric-2.png)

《类似围棋棋盘的图》

> 可以脑补手动接线的场景吗，到了Switch Fabric架构，纵横交错的线实现互通。

所以，交换机每个端口都是隔离的一个冲突域

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/switch-port.jpg)



#### hub single link

HUB（集线器）、冲突和冲突域是很老的设备和概念了，因为很早以前HUB内部只要一条通讯线路，多个设备接到HUB通讯时，就会发生链路冲突。

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/hub-net-conflict.png)

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/hub-conflict-demo.png)

#### Router

路由器一个接口一个广播域。