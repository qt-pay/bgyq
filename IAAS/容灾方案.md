## 容灾方案

双活，容灾，绕不开的活。

容灾(Disaster Tolerance) 

### What Is Disaster Tolerance?

Disaster tolerance is the ability of a system to restore an application on an alternate cluster when the primary cluster fails. Disaster tolerance is based on data replication and failover.

容灾系统是指在相隔较远的异地，建立两套或多套功能相同的IT系统，互相之间可以进行健康状态监视和功能切换，当一处系统因意外（如火灾、地震等）停止工作时，整个应用系统可以切换到另一处，使得该系统功能可以继续正常工作。容灾技术是系统的高可用性技术的一个组成部分，容灾系统更加强调处理外界环境对系统的影响，特别是灾难性事件对整个IT节点的影响，提供节点级别的系统恢复功能。

### SRM

SRM： Site Recovery Manager 

SRM是一种基于两套独立的异地虚拟化集群，将生产站点的虚拟机配置信息、存储数据异步复制到备份站点的技术，当生产站点故障时，可通过一键切换，使业务系统在数分钟内切换至备份站点运行。

通常超融合平台或者虚拟化平台都应该基于SRM技术，实现了分钟级RPO和RTO的数据中心可靠性解决方案。SRM容灾功能作为功能增强包，按照物理CPU授权，理论上可以为无限数量的虚拟机提供SRM容灾保护。

![](https://image-1300760561.cos.ap-beijing.myqcloud.com/bgyq-blog/h3c-srm.jpg)

### CDP

CDP（Continuous Data Protection）即连续数据保护方案，可在数据发生任何变化时将数据有效地保护起来。

CDP（Continuous Data Protect 持续数据保护）技术，即在不影响主要数据运行前提下，通过捕获或跟踪数据的变化，并将其独立存放在生产数据之外，以确保数据可以恢复到过去的任意时间点的方法。理论上，任意一次的文件数据变化都会被自动记录，因此称为持续数据保护。

CDP技术能确定RPO指标，恢复到指定的任意时间点，以满足不同场景下的需求。SNIA（全球网络存储工业协会）在2011年的一份技术文档中，指出了CDP的三大标准：

* 可以捕获源数据任意的数据变化
* 至少可以备份到另外一个地方（异地容灾）
* 可以恢复到任意时间点

从技术实现上，很多CDP方案需要安装代理软件，获取IO的变化。

基于磁盘备份的容灾，是基于CDP操作系统数据复制技术实现容灾。通过安装在保护站点主机中的Agent服务来获取源端主机的信息，捕获数据块的变化，并将增量数据传输给存储节点，备份到超融合管理平台容灾端的存储中。

适用场景：基于磁盘备份的容灾适合混合架构、异构云、同构云、裸金属、虚拟机容灾。还可用于生产机的关键业务的容灾。

- 同构场景：指保护站点与恢复站点是相同版本虚拟化管理平台，要保护的平台上为虚拟机。

- 异构场景：指保护对象为其他异构云平台的虚拟机或裸金属服务器，恢复站点为本虚拟化管理平台。

- 混合架构：指保护保护对象既有虚拟机又有裸金属服务器，恢复站点为虚拟化管理平台。

### 参考

1. h3c
2. 